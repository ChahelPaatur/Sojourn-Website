(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3],{3337:function(e,t,s){Promise.resolve().then(s.bind(s,679))},679:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return n}});var r=s(7437),a=s(2265);function n(){let[e,t]=(0,a.useState)([]),[s,n]=(0,a.useState)(!0),[i,l]=(0,a.useState)(""),[c,d]=(0,a.useState)(!1),[o,x]=(0,a.useState)(""),[m,u]=(0,a.useState)(""),[h,b]=(0,a.useState)(""),[g,p]=(0,a.useState)(!1);async function f(){try{n(!0),l("");let e=await fetch("/api/subscribe",{method:"GET",headers:{"Cache-Control":"no-cache",Pragma:"no-cache"}});if(!e.ok)throw Error("Failed to fetch subscriber data: ".concat(e.statusText));let s=await e.json();s.subscribers&&Array.isArray(s.subscribers)?t(s.subscribers):s.emails&&Array.isArray(s.emails)?t(s.emails.map(e=>({email:e,timestamp:new Date().toISOString(),source:"unknown",status:"active"}))):t([])}catch(e){console.error("Error fetching subscribers:",e),l("Failed to load subscriber data. Please try refreshing the page."),e instanceof Error&&(e.message.includes("401")||e.message.includes("403"))&&y()}finally{n(!1)}}(0,a.useEffect)(()=>{try{let e="true"===sessionStorage.getItem("adminLoggedIn");d(e),p(!0),e?f():n(!1)}catch(e){console.error("Error checking session:",e),d(!1),p(!0),n(!1)}},[]);let y=()=>{try{sessionStorage.removeItem("adminLoggedIn")}catch(e){console.error("Error clearing session:",e)}d(!1),t([])},j=e=>{try{return new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}catch(e){return"Invalid date"}};return g?c?(0,r.jsx)("div",{className:"min-h-screen bg-black text-white pt-24",children:(0,r.jsxs)("div",{className:"max-w-6xl mx-auto px-4 py-8",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,r.jsx)("h1",{className:"text-2xl md:text-3xl font-bold bg-gradient-to-r from-[#ff7e54] to-[#cf4b6c] text-transparent bg-clip-text",children:"Email Subscribers"}),(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsxs)("div",{className:"bg-gray-900 px-3 py-1 rounded-md text-sm",children:[(0,r.jsx)("span",{className:"text-gray-400",children:"Total:"})," ",(0,r.jsx)("span",{className:"font-medium text-white",children:e.length})]}),(0,r.jsx)("button",{onClick:y,className:"px-3 py-1 bg-gray-800 text-gray-300 rounded-md hover:bg-gray-700 transition-colors text-sm",children:"Sign Out"})]})]}),(0,r.jsxs)("div",{className:"bg-gray-900/80 backdrop-blur-sm rounded-lg border border-gray-800 shadow-lg overflow-hidden",children:[(0,r.jsxs)("div",{className:"px-4 py-3 border-b border-gray-800 flex justify-between items-center",children:[(0,r.jsx)("h2",{className:"text-lg font-medium text-white",children:"Subscriber List"}),(0,r.jsx)("button",{onClick:()=>f(),className:"px-3 py-1 bg-[#ff7e54] text-white rounded-md text-sm hover:bg-[#e06c48] transition-colors",children:"Refresh"})]}),s?(0,r.jsx)("div",{className:"flex justify-center items-center h-48",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-[#ff7e54]"})}):i?(0,r.jsx)("div",{className:"p-4 text-red-400 text-center",children:i}):(0,r.jsx)("div",{className:"overflow-x-auto",children:0===e.length?(0,r.jsxs)("div",{className:"py-12 text-center text-gray-400",children:[(0,r.jsx)("p",{children:"No subscribers yet"}),(0,r.jsx)("p",{className:"text-sm mt-1",children:"Subscribers will appear here when they sign up"})]}):(0,r.jsxs)("table",{className:"w-full",children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{className:"text-left bg-gray-800/60",children:[(0,r.jsx)("th",{className:"px-4 py-2 text-xs font-medium text-gray-300",children:"#"}),(0,r.jsx)("th",{className:"px-4 py-2 text-xs font-medium text-gray-300",children:"Email Address"}),(0,r.jsx)("th",{className:"px-4 py-2 text-xs font-medium text-gray-300",children:"Date"}),(0,r.jsx)("th",{className:"px-4 py-2 text-xs font-medium text-gray-300",children:"Status"})]})}),(0,r.jsx)("tbody",{children:e.map((e,t)=>(0,r.jsxs)("tr",{className:"border-b border-gray-800 hover:bg-gray-800/30 transition-colors",children:[(0,r.jsx)("td",{className:"px-4 py-2 text-xs text-gray-400",children:t+1}),(0,r.jsx)("td",{className:"px-4 py-2 text-sm font-medium text-white",children:e.email}),(0,r.jsx)("td",{className:"px-4 py-2 text-xs text-gray-400",children:j(e.timestamp)}),(0,r.jsx)("td",{className:"px-4 py-2",children:(0,r.jsx)("span",{className:"px-2 py-0.5 text-xs rounded-full ".concat("active"===e.status?"bg-green-900/30 text-green-400":"bg-red-900/30 text-red-400"),children:"active"===e.status?"Active":"Unsubscribed"})})]},t))})]})}),(0,r.jsx)("div",{className:"p-3 border-t border-gray-800 text-xs text-gray-500",children:(0,r.jsx)("p",{children:"Note: For production use, implement a database solution instead of in-memory storage."})})]})]})}):(0,r.jsx)("div",{className:"min-h-screen bg-black text-white flex flex-col items-center justify-center p-4 pt-32",children:(0,r.jsxs)("div",{className:"w-full max-w-md",children:[(0,r.jsxs)("div",{className:"text-center mb-8",children:[(0,r.jsx)("h1",{className:"text-4xl font-bold bg-gradient-to-r from-[#ff7e54] to-[#cf4b6c] text-transparent bg-clip-text mb-2",children:"SoJourn Admin"}),(0,r.jsx)("p",{className:"text-gray-400",children:"Sign in to manage subscribers"})]}),(0,r.jsxs)("div",{className:"bg-gray-900/70 backdrop-blur-xl rounded-lg p-8 shadow-xl border border-gray-800",children:[h&&(0,r.jsx)("div",{className:"mb-4 p-3 bg-red-900/30 border border-red-800 rounded-md text-red-200 text-sm",children:(0,r.jsx)("p",{children:h})}),(0,r.jsxs)("form",{onSubmit:e=>{if(e.preventDefault(),b(""),"AdminHCV"===o&&"Harshishell"===m){d(!0);try{sessionStorage.setItem("adminLoggedIn","true"),f()}catch(e){console.error("Error storing session:",e),b("Failed to store session. Please try again.")}}else b("Invalid username or password")},className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"username",className:"block text-sm font-medium text-gray-300 mb-1",children:"Username"}),(0,r.jsx)("input",{id:"username",type:"text",value:o,onChange:e=>x(e.target.value),className:"w-full px-4 py-2 bg-gray-800/50 border border-gray-700 rounded-lg focus:ring-2 focus:ring-[#ff7e54] focus:border-transparent transition-all text-white",placeholder:"Enter your username",required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-300 mb-1",children:"Password"}),(0,r.jsx)("input",{id:"password",type:"password",value:m,onChange:e=>u(e.target.value),className:"w-full px-4 py-2 bg-gray-800/50 border border-gray-700 rounded-lg focus:ring-2 focus:ring-[#ff7e54] focus:border-transparent transition-all text-white",placeholder:"Enter your password",required:!0})]}),(0,r.jsx)("button",{type:"submit",className:"w-full py-2 bg-gradient-to-r from-[#ff7e54] to-[#cf4b6c] text-white font-medium rounded-lg hover:opacity-90 transition-opacity",children:"Sign In"})]})]})]})}):(0,r.jsx)("div",{className:"min-h-screen bg-black text-white flex items-center justify-center",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-[#ff7e54]"})})}}},function(e){e.O(0,[971,69,744],function(){return e(e.s=3337)}),_N_E=e.O()}]);